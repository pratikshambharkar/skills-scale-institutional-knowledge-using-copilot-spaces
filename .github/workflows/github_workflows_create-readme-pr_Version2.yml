name: Create OctoAcme README PR

on:
  workflow_dispatch:
    inputs:
      reviewer:
        description: 'Reviewer GitHub username'
        required: true
        default: 'pratikshambharkar'
      issue_number:
        description: 'Related issue number (optional)'
        required: false
        default: '2'

permissions:
  contents: write
  pull-requests: write

jobs:
  create-pr:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Create branch
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "41898282+github-actions[bot]@users.noreply.github.com"
          git checkout -b docs/add-project-management-readme

      - name: Add README
        run: |
          mkdir -p docs
          cat > docs/README.md <<'EOF'
# OctoAcme Project Management Docs

OctoAcme project management docs collect our workflows, templates, and playbooks so teams can start work quickly and consistently. This README serves as the primary landing page and index for program-level processes stored in this folder.

OctoAcme follows a lightweight, repeatable lifecycle: Initiation, Planning, Execution, Release, and Close & Retrospective. Initiation clarifies the problem, measurable goals, stakeholders, and a one-pager to capture success metrics and constraints. Planning breaks approved initiatives into a prioritized backlog, estimates, and a milestone/release plan that surfaces dependencies and risks. Execution focuses on short iterations, visible tracking, and an explicit PR + CI policy that keeps changes small and reviewable. Release uses standardized pre-release checks, smoke verifications, and a rollback/incident playbook to reduce risk. Retrospectives capture learnings as action items that feed back into the backlog.

Key workflows and roles: teams track work on a project board (Backlog → Ready → In Progress → In Review → QA → Done). Pull requests should be small and include the issue link, acceptance criteria, and pass CI/security checks before merge. A simple Risk Register tracks ID, impact, owner, and mitigation and is reviewed in weekly syncs. Core personas are Product Manager (PdM) who defines outcomes and success metrics; Project Manager (PM) who coordinates delivery, risks, and stakeholder comms; Developers who implement and test; and QA who verifies acceptance criteria and staging smoke tests.

Communication and quality assurance: regular rhythms (daily standups, weekly delivery syncs, PM+PdM alignment, monthly stakeholder updates) keep teams aligned and provide escalation points. QA relies on unit and integration tests, security scans in CI, smoke/end-to-end checks for critical flows, and manual acceptance testing when necessary. Before any release, follow the Release & Deployment checklist and publish release notes and status in the project README.

Quick links
- docs/octoacme-project-management-overview.md
- docs/octoacme-project-initiation.md
- docs/octoacme-project-planning.md
- docs/octoacme-execution-and-tracking.md
- docs/octoacme-risks-and-communication.md
- docs/octoacme-release-and-deployment.md
- docs/octoacme-retrospective-and-continuous-improvement.md
- docs/octoacme-roles-and-personas.md

Acceptance checklist
- [ ] Content aligns with existing process docs
- [ ] Update improves clarity or closes a documented gap
- [ ] Proposed content has been reviewed with stakeholders (if needed)
EOF

      - name: Commit changes
        run: |
          git add docs/README.md
          git commit -m "docs: add docs/README.md — OctoAcme project management summary & index" || echo "No changes to commit"

      - name: Push branch
        run: git push --set-upstream origin docs/add-project-management-readme

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v5
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          commit-message: "docs: add docs/README.md — OctoAcme project management summary & index"
          branch: docs/add-project-management-readme
          title: "docs: Add README for OctoAcme Project Management Docs — summary & links"
          body: |
            This PR adds docs/README.md as a landing page and index for OctoAcme project management processes.

            Related issue: #${{ github.event.inputs.issue_number }}

            Requested reviewer: ${{ github.event.inputs.reviewer }}
          reviewers: ${{ github.event.inputs.reviewer }}
          assignees: ${{ github.event.inputs.reviewer }}
          labels: documentation,process-improvement
